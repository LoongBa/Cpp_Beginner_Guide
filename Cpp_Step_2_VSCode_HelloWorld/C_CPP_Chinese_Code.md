# 《解决 C/C++ 常见问题：中文输出乱码》

> **乱码问题**是软件开发经常遇到的问题，弄明白原理，见招拆招，不再是难题。

来自：**《C/C++ 新手避坑指南 系列》**

+ 龙爸写给**初学 C/C++** 的朋友们的**新手避坑指南**，扫平入门的几个大障碍的**极简教程**。

原文发布、维护于龙爸**陪孩子学习 `Python`、`C++` 、`算法入门` 的练习项目**:

- [龙爸个人网站1](https://coffeedrunk.cn/archives/Cpp_Beginner_Guide)| [Github](https://github.com/LoongBa/Cpp_Beginner_Guide) 国外 | [GitCode](https://gitcode.com/LoongBa/Cpp_Beginner_Guide) 国内 | [Gitee](https://gitee.com/LoongBa/Cpp_Beginner_Guide) 国内 | [龙爸个人网站2](https://loongba.cn/archives/Cpp_Beginner_Guide)

- 欢迎意见、建议和帮助，谢谢 🥰💕❤️

- 如果对你有帮助，请支持 Star~ ✨✨✨

- 转载时请保留声明和出处，谢谢 🤝🤝🤝

- 如果是 `Github`、`MarkText`、`PDF` 等，请打开目录方便阅读 😎

---

当我们在 C/C++ 输出内容加上中文，例如：

```c
#include <stdio.h>
int main() {
  printf("Hello World! 你好，我来了。");
  return 0;
}
```

运行，查看下方输出内容中出现看不懂的乱字符，俗称乱码，其实是终端环境没能正常识别字符集的问题：

各种教程中推荐的解决方法有三种，都没有真正理解乱码的原因，都不是正确方法：

1. 改变代码文件的字符集设置——不妥，UTF-8 通用性更好；

2. 改变 `VSCode` 的集成终端字符集设置——在其它电脑上运行需要重新配置；

3. 改变 Windows 环境的字符集设置——影响到系统中所有应用，可能有不确定的副作用。

前几种方法都是改变外部环境设置，还可能会干扰其它功能，所以推荐龙爸的独家方法：

> **代码中进行处理**——真正从根源解决问题，与环境设置无关。

```c
#include <stdio.h>
#include <stdlib.h>

int main() {
  // 设置控制台输出为UTF-8编码，以支持中文输出
  system("chcp 65001>nul"); 

  printf("Hello World! 你好，我来了。");

  return 0;
}
```

新增的两行代码中：`chcp 65001` 表示把系统的字符集切换为 `65001 (UTF-8)`，

——与 `VSCode` 编辑代码时的默认字符集一致：

所以，如果你的编辑环境的编码为 `GB2312` 的话，代码中的 `65001` 改为 `936`也能正常输出。

——最好保持 `UTF-8` 适用性更广泛。

——以后你会学习到<u>字符集相关的知识</u>，这是很容易出现混乱的若干历史包袱之一，属于 程序员必经心魔 。

> `Windows` 系统中默认也是 `936`，
> 很多教程教你去修改 `Windows` 系统的**默认字符集**为 `Unicode`，
> ——显然，比更改 `VSCode` 终端环境参数的影响更大，**会带来更多无法预料的麻烦**。

**知道背后的原理，以后能少很多麻烦，或者遇到问题知道原因**

> **这也是很多教程中存在问题的原因：** **——不是确切的知道为什么、不知道有没有更好的解决方案。**
